<div>
    <div class="row">
        <button type="submit" class="btn btn-default" ng-click="sendLogout()">Logout</button>
        <div class="col-sm-8">
            <p>Logged in as {{username | uppercase }} ({{accountType | uppercase}})</p>
        </div>
    </div>

    <div class="row">
        <div class="btn-group col-sm-12" role="group">
          <button type="button" class="btn btn-default" ng-click="setButton(1)">User Management</button>
          <button type="button" class="btn btn-default" ng-click="setButton(2)" ng-hide="accountType != 'admin'">Company Managment</button>
          <button type="button" class="btn btn-default" ng-click="setButton(3)">Truck Managment</button>
          <button type="button" class="btn btn-default" ng-click="setButton(4)" ng-hide="accountType != 'admin'">Spread Site Management</button>
          <button type="button" class="btn btn-default" ng-click="setButton(5)">Reports</button>
        </div>
    </div>
    <div ng-show="isButton(1)">
        <form class="form-horizontal" name="user_form" novalidate>
            <br>
            <div class="form-group">
                <label for="users" class="col-sm-2 control-label">Existing Users:</label>
                <div class="col-sm-3">
                    <select class="form-control input-lg" ng-model="selectedUser" ng-options="user for user in userList">
                        <option value=""></option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="username" class="col-sm-2 control-label">Username:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="text" name="username" id="username" ng-model="newUser.username" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="password" class="col-sm-2 control-label">Password:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="password" name="password" ng-model="newUser.password" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="usertype" class="col-sm-2 control-label">User Type:</label>
                <div class="col-sm-3">
                    <select class = "form-control input-lg" ng-model="newUser.type" required>
                        <option value="admin" ng-hide="accountType!='admin'">Admin</option>
                        <option value="contractor" ng-hide="accountType!='admin'">Contractor</option>
                        <option value="driver">Driver</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="company" class="col-sm-2 control-label">Company:</label>
                <div class="col-sm-3">
                    <select class="form-control input-lg" id="company" ng-model="selectedCompany" ng-options="company for company in companyList"></select>
                </div>
            </div>
            <div class="form-group">
                <label for="email" class="col-sm-2 control-label">Email Address:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="email" name="email" ng-model="newUser.email" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="active" class="col-sm-2 control-label">Active?</label>
                <div class="col-sm-3">
                    <select class="form-control input-lg" ng-model="newUser.active" required>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-3">
                    <button type="submit" class="btn btn-default" ng-click="createUser()">Create/Update User</button>
                </div>
                <div class="col-sm-3">
                    <button class="btn btn-default" ng-click="deleteUser()">Delete User</button>
                </div>
            </div>
        </form>
    </div>
    <div ng-show="isButton(2)">
        <form class="form-horizontal" name="company_form" novalidate>
            <br>
            <div class="form-group">
                <label for="Users" class="col-sm-2 control-label">Existing Companies:</label>
                <div class="col-sm-3">
                    <select class="form-control input-lg" ng-model="selectedCompany" ng-options="company for company in companyList"></select>
                </div>
            </div>
            <div class="form-group">
                <label for="name" class="col-sm-2 control-label">Company Name:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="text" name="name" ng-model="company.name" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="phone" class="col-sm-2 control-label">Phone Number:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="phone" name="phone" ng-model="company.phone" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="active" class="col-sm-2 control-label">Active?</label>
                <div class="col-sm-3">
                    <select class="form-control input-lg" ng-model="company.active" required>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <button type="submit" class="" ng-click="submitCompany()">Create/Update Company</button>
            </div>
        </form>
    </div>
    <div ng-show="isButton(3)">
        <div ng-repeat="truck in trucks">
            <div class="row truck-border">
                <div class="col-sm-10">
                    <div class="row">
                        <div class="col-sm-12"><label class="control-label">Company</label>: {{truck.companyName}}</div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3"><label class="control-label">Nick Name</label>: {{truck.nickname}}</div>
                        <div class="col-sm-5"><label class="control-label">VIN</label>: {{truck._id}}</div>
                        <div class="col-sm-2"><label class="control-label">Capacity</label>: {{truck.capacity}}</div>
                        <div class="col-sm-2"><label class="control-label">Tag</label>: {{truck.license}}</div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3"><label class="control-label">Make</label>: {{truck.make}} </div>
                        <div class="col-sm-5"><label class="control-label">Model</label>: {{truck.model}} </div>
                        <div class="col-sm-2"><label class="control-label">Year</label>: {{truck.year}} </div>
                        <div class="col-sm-2"><label class="control-label">Color</label>: {{truck.color}} </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3"><label class="control-label">Status</label>: {{truck.stat}}</div>
                        <div class="col-sm-9"><label class="control-label">Approved Drivers: </label> <span class="approved-driver" ng-repeat="driver in truck.approvedDrivers">{{driver}}</span></div>
                    </div>
                </div>
                <div class="col-sm-2 vertical-align-middle">
                    <button ng-click="deleteTruck(truck._id)">Delete</button>
                    <button ng-click="selectTruck(truck._id)">Select</button>
                </div>
            </div>
        </div>

        <form class="form-horizontal" name="truck_form">
            <div class="form-group" id="scrollhere">
                <label for="company" class="col-sm-2 control-label">Company:</label>
                <div class="col-sm-3">
                    <select class="form-control input-lg" ng-model="selectedCompany" ng-options="company for company in companyList"></select>
                </div>
            </div>
            <div class="form-group">
                <label for="vin" class="col-sm-2 control-label">VIN:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="text" name="vin" ng-model="newTruck.vin" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="capacity" class="col-sm-2 control-label">Capacity:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="text" name="capacity" ng-model="newTruck.capacity" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="tag" class="col-sm-2 control-label">License Tag:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="text" name="tag" ng-model="newTruck.tag" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="nickname" class="col-sm-2 control-label">Nick Name:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="text" name="nickname" ng-model="newTruck.nickname" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="make" class="col-sm-2 control-label">Make:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="text" name="make" ng-model="newTruck.make" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="Model" class="col-sm-2 control-label">Model:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="text" name="model" ng-model="newTruck.model" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="year" class="col-sm-2 control-label">Year:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="text" name="year" ng-model="newTruck.year" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="color" class="col-sm-2 control-label">Color:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="text" name="color" ng-model="newTruck.color" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="status" class="col-sm-2 control-label">Status:</label>
                <div class="col-sm-3">
                    <select class="form-control input-lg" ng-model="newTruck.stat">
                        <option value="active">Active</option>
                        <option value="out of service">Out of Service</option>
                        <option value="backup">Backup</option>
                        <option value="sold">Sold</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="driver" class="col-sm-2 control-label">Approved Drivers:</label>
                <div class="col-sm-3">
                    <div ng-repeat="driver in drivers">
                        <label class="checkbox" for="{{driver}}">
                            <input type="checkbox" ng-model="approvedDrivers.usernames[driver]" name="{{driver}}" id="{{driver}}" />
                            {{driver}}
                        </label>
                    </div>

                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-2">
                    <button type="submit" class="" ng-click="submitTruck()">Add/Update Truck</button>
                </div>
            </div>
        </form>
    </div>
    <div ng-show="isButton(4)">
        <div ng-repeat="spreadSite in spreadSites">
            <div class="row truck-border">
                <div class="col-sm-12">
                    <div class="row">
                        <div class="col-sm-3"><label class="control-label">Name</label>: {{spreadSite.name}}</div>
                        <div class="col-sm-5"><label class="control-label">Address</label>: {{spreadSite.address}}</div>
                        <div class="col-sm-2"><label class="control-label">Contact Name</label>: {{spreadSite.contactName}}</div>
                        <div class="col-sm-2"><label class="control-label">Phone</label>: {{spreadSite.phone}}</div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12"><label class="control-label">Approved Companies: </label> <span class="approved-driver" ng-repeat="company in spreadSite.approvedCompanies">{{company.name}}</span></div>
                    </div>
                </div>
                <div class="col-sm-2 vertical-align-middle">
                    <button ng-click="editSite(spreadSite)">Edit</button>
                </div>
            </div>
        </div>

        <form class="form-horizontal" name="spreadsite_form">
            <div class="form-group">
                <label for="name" class="col-sm-2 control-label">Name:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="text" name="name" ng-model="spreadSiteForm.name" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="address" class="col-sm-2 control-label">Address:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="text" name="address" ng-model="spreadSiteForm.address" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="contactname" class="col-sm-2 control-label">Contact Name:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="text" name="contactname" ng-model="spreadSiteForm.contactName" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="phone" class="col-sm-2 control-label">Phone:</label>
                <div class="col-sm-3">
                    <input class="form-control input-lg" type="text" name="phone" ng-model="spreadSiteForm.phone" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="driver" class="col-sm-2 control-label">Approved Companies:</label>
                <div class="col-sm-3">
                    <div ng-repeat="company in approvedCompaniesList">
                        <label class="checkbox" for="{{company}}">
                            <input type="checkbox" ng-model="approvedCompanies.companies[company._id]" name="{{company}}" id="{{company}}" />
                            {{company.name}}
                        </label>
                    </div>

                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-2">
                    <button type="submit" class="" ng-click="submitSpreadSite()">Submit</button>
                </div>
            </div>
        </form>
    </div>
    <div ng-show="isButton(5)">
        <div class="row">
            <div class="col-sm-4">
                <div style="display:inline-block; min-height:290px;">
                    <label>Begin Date:</label>
                    <datepicker ng-model="report.beginDate" class="well well-sm"></datepicker>
                </div>
                <div>
                    <button type="submit" ng-click="refreshReport()">Refresh Report</button>
                </div>
            </div>
            <div class="col-sm-8">
                <div ng-repeat="collection in collections">
                    <div class="row truck-border">
                        <div class="col-sm-10">
                            <div class="row">
                                <div class="col-sm-4"><label class="control-label">Truck VIN</label>: {{collection.truckId}}</div>
                                <div class="col-sm-8"><label class="control-label">Location</label>: Latitude: {{collection.location.latitude}} Longitude: {{collection.location.longitude}}</div>

                            </div>
                            <div class="row">
                                <div class="col-sm-4"><label class="control-label">Company</label>: {{collection.companyName}}</div>
                                <div class="col-sm-8"><label class="control-label">Address Visited</label>: {{collection.location.address}}</div>
                            </div>

                            <div class="row">
                                <div class="col-sm-2"><label class="control-label">Volume</label>: {{collection.volume}}</div>
                                <div class="col-sm-2"><label class="control-label">Type</label>: {{collection.type}} </div>
                                <div class="col-sm-8"><label class="control-label">Time</label>: {{collection.createdTimeStamp | date : 'medium' }} </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    
    <flash:messages ng:show="messages"></flash:messages>
</div>
